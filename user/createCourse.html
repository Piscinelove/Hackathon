<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Appui-on</title>

	<!-- STYLES -->
    <link rel="stylesheet" href="../libs/bootstrap.min.css"/>
    <link rel="stylesheet" href="../libs/bootstrap-theme.min.css"/>
    <link rel="stylesheet" href="../css/sidebar.css"/>
    <link rel="stylesheet" href="../css/main.css"/>
	
	<!-- SCRIPTS -->
    <script type="text/javascript" src="../js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../js/jquery.js"></script>
    <script type="text/javascript" src="../js/main.js"></script>
</head>
<script>

    $(document).ready(function() {
        getMatiere();
    });

    function getMatiere(){
        $.ajax({
            url: '/php/traitement.php',
            type: 'POST',
            data: "getMatiere=getMatiere",
            success : function(res){
                res = JSON.parse(res);
                var txt = '<option disabled selected="selected">Matière</option>';
                for(i=0;i<res.length;i++){
                    txt+="<option value=\""+res[i]['idType']+"\">"+res[i]['name']+"</option>";
                }
                document.getElementById('typeCourse').innerHTML = txt;

            }
        })
    }
    function getLvl(){
        var idMatiere = document.getElementById('typeCourse').value;
        $.ajax({
            url: '/php/traitement.php',
            type: 'POST',
            data: "getLvl="+idMatiere,
            success : function(res){
                $(".cacheParMatiere").show(100);
                res = JSON.parse(res);
                var txt = '<option disabled selected="selected">Jusqu\'où pouvez-vous enseigner ?</option>';
                for(i=0;i<res.length;i++){
                    txt+="<option value=\""+res[i]['idType']+"\">"+res[i]['name']+"</option>";
                }
                document.getElementById('behaviorCourse').innerHTML = txt;

            }
        })
        
    }

    function createCours(e){
        var toSend = "";
        $("#formCourse input").each(function(index, el) {
            toSend+=el.attributes['name'].value+"="+el.value+"&";
        });
        $("#formCourse textarea").each(function(index, el) {
            toSend+=el.attributes['name'].value+"="+el.value+"&";
        });
        $("#formCourse select").each(function(index, el) {
            toSend+=el.attributes['name'].value+"="+el.value+"&";
        });
        toSend = toSend.slice(0,-1);
        e.preventDefault();
        $.ajax({
            url: '/php/traitement.php',
            type: 'POST',
            data: toSend,
            success : function(res){
                window.location="/user/myTeaching.html";
            }
        })
        
    }
    </script>
<body>
    <div id="wrapper" class="toggled">
        <!-- Sidebar -->
		<div id="sidebar-wrapper">
			<ul class="sidebar-nav">
				<li class="sidebar-brand">
					<a id="menu-toggle" href="#">Menu <span id="main_icon" class="glyphicon glyphicon-menu-hamburger"></span></a>
				<li>
					<a href="profil.html">Mon profil <span class="sub_icon glyphicon glyphicon-link"></span></a>
				</li>
				<li>
					<a href="learnings.html">Mes apprentissages <span class="sub_icon glyphicon glyphicon-link"></span></a>
				</li>
				<li>
					<a href="teachings.html">Mes enseignements <span class="sub_icon glyphicon glyphicon-link"></span></a>
				</li>
				<li>
					<a href="disponibilities.html">Mes disponibilités <span class="sub_icon glyphicon glyphicon-link"></span></a>
				</li>
				<li>
					<a href="findCourse.html">Trouver un cours <span class="sub_icon glyphicon glyphicon-link"></span></a>
				</li>
				<li>
					<a href="createCourse.html">Créer un cours <span class="sub_icon glyphicon glyphicon-link"></span></a>
				</li>
				<!--<?php /*
						$page = $_GET['page'];
						
						echo '
						<li ';if($page =='home'){ echo 'class="active"';} echo '><a href="'.LINK_HOME.'"><span class="glyphicon glyphicon-home"></span> <span class="hidden-xs">Accueil</span></a></li>
						<li ';if($page =='film'){ echo 'class="active"';} echo '><a href="'.LINK_FILM.'"><span class="glyphicon glyphicon-film"></span> <span class="hidden-xs">Films</span></a></li>
						<li ';if($page =='serie'){ echo 'class="active"';} echo '><a href="'.LINK_SERIE.'"><span class="glyphicon glyphicon-inbox"></span> <span class="hidden-xs">Séries</span></a></li>
						<li ';if($page =='profil'){ echo 'class="active"';} echo '><a href="'.LINK_PROFIL.'"><span class="glyphicon glyphicon-wrench"></span> <span class="hidden-xs">Profil</span></a></li>';
						if($_SESSION['role'] == 1) {
							echo '
							<li ';if($page =='user'){ echo 'class="active"';} echo '><a href="'.LINK_USER.'"><span class="glyphicon glyphicon-user"></span> <span class="hidden-xs">Utilisateurs</span></a></li>';
						}
						//<li ';if($page =='music'){ echo 'class="active"';} echo '><a href="'.LINK_MUSIC.'"><span class="glyphicon glyphicon-headphones"></span> <span class="hidden-xs">Musiques</span></a></li>';
				*/	?>-->
			</ul>
		</div>
		<!-- /#sidebar-wrapper -->
        <!-- Page Content -->
        <div id="page-content-wrapper">
            <h3 class="col-xs-12">Créer un cours</h3>
            <form class="col-md-offset-2 col-md-8 col-xs-12" id="formCourse" onsubmit="createCours(event)">
                <div class="form-group">
                    <label for="typeCourse">Matière</label>
                    <select class="form-control" id="typeCourse" name="typeCourse" onchange="getLvl()">
                        <option disabled selected="selected">Matière</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="descriptionCourse">Description</label>
                    <textarea class="form-control" id="descriptionCourse" name="descriptionCourse" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="nbUsersCourse">Nombre de participants maximum</label>
                    <input type="number" class="form-control" name="nbUsersCourse" id="nbUsersCourse" placeholder="Nombre">
                </div>
                <div class="form-group cacheParMatiere" style="display: none">
                    <label for="behaviorCourse">Niveau</label>
                    <select class="form-control" id="behaviorCourse" name="behaviorCourse">
                        <option disabled selected="selected">Jusqu'où pouvez-vous enseigner ?</option>
                    </select>
                </div>
                <div class="form-group pSubmit">
                    <button type="submit" class="btn btn-primary">Valider</button>
                </div>
            </form>
        </div>
        <!-- /#page-content-wrapper -->
    </div>
    <!-- /#wrapper -->
    <script src="../js/bootstrap.min.js"></script>
    <!-- Menu Toggle Script -->
    <script>
    $(".cancel").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });

    $("#give-section1").click(function(e) {
        e.preventDefault();
        $("#section2").hide();
        $("#section1").show();
    });

    $("#give-section2").click(function(e) {
        e.preventDefault();
        $("#section1").hide();
        $("#section2").show();
    });
    </script>
</body>

</html>
